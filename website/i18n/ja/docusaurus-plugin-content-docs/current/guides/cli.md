# コマンドラインインターフェイス

## 使い方

```shell
$ markuplint target.html
$ markuplint target.html target2.html
$ markuplint "**/*.html"
```

CLIはターゲットとなるHTMLファイルを可変長引数として受け取ります。また、glob形式も受け付けます。

成功した場合は終了コード`0`を返します。また、1つ以上の問題があった場合は`1`を返します。

## オプション

| 正規形オプション           | 省略形オプション | 引数                                         | デフォルト値 | 解説                                                          |
| -------------------------- | ---------------- | -------------------------------------------- | ------------ | ------------------------------------------------------------- |
| `--config`                 | `-c`             | ファイルパス                                 | なし         | 設定ファイルのパス                                            |
| `--fix`                    | なし             | なし                                         | false        | ルールが対応していれば対象ファイルを修正します                |
| `--format`                 | `-f`             | `JSON`、`Simple`、`GitHub`もしくは`Standard` | `Standard`   | 出力形式                                                      |
| `--no-search-config`       | なし             | なし                                         | false        | 設定ファイルを自動で検索しません                              |
| `--ignore-ext`             | なし             | なし                                         | false        | 拡張子の種類に関わらず受け取ったファイルを評価します          |
| `--no-import-preset-rules` | なし             | なし                                         | false        | 組み込みルールを利用しません                                  |
| `--locale`                 | なし             | 言語コード（例：`ja`）                       | OS設定による | メッセージの言語                                              |
| `--no-color`               | なし             | なし                                         | false        | 出力をカラーリングしません                                    |
| `--problem-only`           | `-p`             | なし                                         | false        | 違反結果のみ出力します                                        |
| `--allow-warnings`         | なし             | なし                                         | false        | `warning`ではステータスコード`0`を返します                    |
| `--no-allow-empty-input`   | なし             | なし                                         | false        | ファイルが見つからなかった場合にステータスコード`1`を返します |
| `--show-config`            | none             | 値なし, `details`                            | 値なし       | 対象ファイルの適用された設定を出力します                      |
| `--verbose`                | なし             | なし                                         | false        | 詳細な情報も同時に出力します                                  |
| `--include-node-modules`   | なし             | なし                                         | false        | `node_module`ディレクトリ内のファイルを含めて評価します       |
| `--severity-parse-error`   | なし             | `error`、`warning`もしくは`off`              | `error`      | パースエラーの深刻度レベルを指定します                        |
| `--max-violations`         | なし             | 数値                                         | `0`          | 表示する違反数を制限します。`0`は制限なしを意味します         |

## Particular run

### `--help`

ヘルプを出力します。（省略形オプション: `-h`）

### `--version`

バージョンを出力します。（省略形オプション: `-v`）

### `--init`

初期化をします。[設定](configuration/index.md)ファイルをつくり、モジュールをインストールします。

```shell
$ npx markuplint --init
```

質問に対話的に答えることで、必要なモジュールをインストールします。

### `--max-violations`

出力に表示される違反数を制限します。このオプションは特に、多くの違反がある既存プロジェクトにMarkuplintを導入する際に、圧倒的な出力を管理し、パフォーマンスを向上させるのに役立ちます。

```shell
# 最初の10件の違反のみを表示
$ markuplint "**/*.html" --max-violations=10

# 最初の違反のみを表示
$ markuplint index.html --max-violations=1

# 制限なし（デフォルトの動作）
$ markuplint index.html --max-violations=0
```

**主な機能:**

- **パフォーマンス最適化**: 制限に達した時点でルール実行を停止し、大規模プロジェクトでのパフォーマンスを向上
- **段階的導入**: 管理可能な数の問題に集中することで段階的な改善を可能に
- **情報表示**: 違反が切り詰められた場合に情報メッセージを表示（標準形式のみ）
- **形式互換性**: すべての出力形式（`--format=json`、`--format=simple`など）でシームレスに動作
- **修正互換性**: `--fix`と併用する場合、完全な修正を保証するため制限は無視される

**段階的改善の使用例:**

1. 現在の違反数を確認: `markuplint "**/*.html" | wc -l` で現在の違反数をカウント
2. 制限を設定: CIで `markuplint "**/*.html" --max-violations=50` を実行
3. 徐々に違反を修正し、制限値を減らしていく
4. すべての違反が修正されたら最終的に制限を削除
